{% comment %}
  Quiz Recommendations Section - Layout Only
  Desktop: Two-column layout (products left, cart summary right)
  Mobile: Single column with sticky cart bar
{% endcomment %}

{{ 'quiz-section.css' | asset_url | stylesheet_tag }}
{{ 'fonts.css' | asset_url | stylesheet_tag }}

{%- style -%}
    #shopify-section-{{ section.id }}.quiz-section {
        background: {{ section.settings.background_color | default: '#F7F7FC' }};
    }
{%- endstyle -%}

<div class="quiz-recommendations quiz-section quiz-recommendations-{{ section.id }}" data-recommendations>
    <div class="quiz-recommendations-wrapper">
        <!-- Content Layout (Products + Right Column) -->
        <div class="quiz-recommendations-content-layout">
            <!-- Left Column: Products Content -->
            <div class="quiz-recommendations-content-column">
                <!-- Header Section -->
                <div class="quiz-recommendations-header">
                    <!-- Sale Banner -->
                    {% if section.settings.sale_banner_text != blank %}
                        <h1 class="recommendations-sale-banner">{{ section.settings.sale_banner_text }}</h1>
                    {% endif %}

                    <!-- Intro Text -->
                    {% if section.settings.intro_text != blank %}
                        <div class="recommendations-intro-text">{{ section.settings.intro_text }}</div>
                    {% endif %}

                    <!-- CTA Button -->
                    {% if section.settings.cta_button_text != blank %}
                        <button class="recommendations-cta-button">
                            {{ section.settings.cta_button_text }}
                        </button>
                    {% endif %}
                </div>

                {% if section.settings.title != blank %}
                    <h2 class="recommendations-title">{{ section.settings.title }}</h2>
                {% endif %}

                {% if section.settings.subtitle != blank %}
                    <div class="recommendations-subtitle">{{ section.settings.subtitle }}</div>
                {% endif %}

                <!-- Product Cards Container -->
                <div class="recommended-products-list" data-recommended-list>
                    <!-- Products will be added here dynamically -->
                </div>

                <!-- Upsell Package Blocks -->
                {% for block in section.blocks %}
                    {% if block.type == 'upsell_package' %}
                        <div class="maison_commerce_maison_upsell_package" {{ block.shopify_attributes }} 
                             data-block-id="{{ block.id }}"
                             data-countdown-hours="{{ block.settings.countdown_hours | default: 0 }}"
                             data-countdown-minutes="{{ block.settings.countdown_minutes | default: 9 }}"
                             data-countdown-seconds="{{ block.settings.countdown_seconds | default: 57 }}"
                             style="--padding-top-mobile: {{ block.settings.padding_top_mobile | default: 0 }}px; --padding-bottom-mobile: {{ block.settings.padding_bottom_mobile | default: 0 }}px; --padding-left-mobile: {{ block.settings.padding_left_mobile | default: 0 }}px; --padding-right-mobile: {{ block.settings.padding_right_mobile | default: 0 }}px; --content-padding-mobile: {{ block.settings.content_padding_mobile | default: 16 }}px; --header-font-size-mobile: {{ block.settings.header_font_size_mobile | default: 11 }}px; --timer-font-size-mobile: {{ block.settings.timer_font_size_mobile | default: 11 }}px; --title-font-size-mobile: {{ block.settings.title_font_size_mobile | default: 22 }}px; --description-font-size-mobile: {{ block.settings.description_font_size_mobile | default: 13 }}px; --button-font-size-mobile: {{ block.settings.button_font_size_mobile | default: 14 }}px; --footer-font-size-mobile: {{ block.settings.footer_font_size_mobile | default: 11 }}px; --badge-font-size-mobile: {{ block.settings.badge_font_size_mobile | default: 11 }}px; --badge-padding-vertical-mobile: {{ block.settings.badge_padding_vertical_mobile | default: 6 }}px; --badge-padding-horizontal-mobile: {{ block.settings.badge_padding_horizontal_mobile | default: 16 }}px; --button-padding-vertical-mobile: {{ block.settings.button_padding_vertical_mobile | default: 14 }}px; --button-padding-horizontal-mobile: {{ block.settings.button_padding_horizontal_mobile | default: 20 }}px; padding-top: {{ block.settings.padding_top_desktop | default: 0 }}px; padding-bottom: {{ block.settings.padding_bottom_desktop | default: 0 }}px; padding-left: {{ block.settings.padding_left_desktop | default: 0 }}px; padding-right: {{ block.settings.padding_right_desktop | default: 0 }}px;">
                            <div class="maison_commerce_maison_upsell_package__container" style="max-width: {{ block.settings.max_width | default: 1200 }}px;">
                                <div class="maison_commerce_maison_upsell_package__block" style="background-color: {{ block.settings.background_color | default: '#fffbc0' }};">
                                    <!-- Header -->
                                    <div class="maison_commerce_maison_upsell_package__header" style="background: {{ block.settings.primary_color | default: '#1a365d' }};">
                                        <div class="maison_commerce_maison_upsell_package__header-left">
                                            <svg class="maison_commerce_maison_upsell_package__flame-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <path d="M10 2L12.5 7.5L18 8.5L14 12.5L15 18L10 15L5 18L6 12.5L2 8.5L7.5 7.5L10 2Z" fill="#E98C36"/>
                                            </svg>
                                            <span class="maison_commerce_maison_upsell_package__header-text" style="font-size: {{ block.settings.header_font_size_desktop | default: 12 }}px;">{{ block.settings.header_text | default: 'LIMITED-TIME CRAZY DEAL' }}</span>
                                        </div>
                                        <div class="maison_commerce_maison_upsell_package__timer" data-upsell-countdown data-block-id="{{ block.id }}" style="font-size: {{ block.settings.timer_font_size_desktop | default: 12 }}px;">
                                            <span class="timer-value" data-timer-hours>00</span>:<span class="timer-value" data-timer-minutes>00</span>:<span class="timer-value" data-timer-seconds>00</span>
                                        </div>
                                    </div>

                                    <!-- Main Content -->
                                    <div class="maison_commerce_maison_upsell_package__content" style="--content-padding-mobile: {{ block.settings.content_padding_mobile | default: 16 }}px; padding: {{ block.settings.content_padding_desktop | default: 24 }}px; gap: {{ block.settings.content_gap | default: 16 }}px;">
                                        {% if block.settings.product_image != blank %}
                                            <div class="maison_commerce_maison_upsell_package__image" style="margin-bottom: {{ block.settings.image_margin_bottom | default: 16 }}px;">
                                                <img src="{{ block.settings.product_image | image_url: width: 800 }}" alt="{{ block.settings.title }}">
                                            </div>
                                        {% endif %}

                                        {% if block.settings.discount_percent > 0 %}
                                            <div class="maison_commerce_maison_upsell_package__discount-badge" style="background: {{ block.settings.discount_badge_color | default: '#E98C36' }}; padding: {{ block.settings.badge_padding_vertical | default: 8 }}px {{ block.settings.badge_padding_horizontal | default: 20 }}px; font-size: {{ block.settings.badge_font_size_desktop | default: 12 }}px; margin-bottom: {{ block.settings.badge_margin_bottom | default: 20 }}px;">SAVE {{ block.settings.discount_percent }}%</div>
                                        {% endif %}

                                        <div class="maison_commerce_maison_upsell_package__text-content" style="gap: {{ block.settings.text_gap | default: 12 }}px;">
                                            <h3 class="maison_commerce_maison_upsell_package__title" style="font-size: {{ block.settings.title_font_size_desktop | default: 28 }}px; color: {{ block.settings.text_color | default: '#102B26' }};">{{ block.settings.title | default: 'Ultimate Hair Care Package' }}</h3>
                                            {% if block.settings.description != blank %}
                                                <div class="maison_commerce_maison_upsell_package__description" style="font-size: {{ block.settings.description_font_size_desktop | default: 14 }}px; color: {{ block.settings.text_color | default: '#102B26' }};">{{ block.settings.description }}</div>
                                            {% endif %}
                                        </div>

                                        {% if block.settings.product != blank %}
                                            <button class="maison_commerce_maison_upsell_package__button" data-upsell-package-button data-product-handle="{{ block.settings.product.handle }}" style="background: {{ block.settings.button_bg_color | default: '#ffffff' }}; color: {{ block.settings.button_text_color | default: '#1a365d' }}; padding: {{ block.settings.button_padding_vertical | default: 16 }}px {{ block.settings.button_padding_horizontal | default: 24 }}px; border-radius: {{ block.settings.button_border_radius | default: 8 }}px; font-size: {{ block.settings.button_font_size_desktop | default: 16 }}px; margin-top: {{ block.settings.button_margin_top | default: 8 }}px;">
                                                {{ block.settings.button_text | default: 'Claim Ultimate Package' }} — <span data-upsell-package-price>{{ block.settings.product.selected_or_first_available_variant.price | money }}</span>
                                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                    <path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                            </button>
                                        {% endif %}

                                        {% if block.settings.footer_text != blank %}
                                            <div class="maison_commerce_maison_upsell_package__footer" style="font-size: {{ block.settings.footer_font_size_desktop | default: 12 }}px; margin-top: {{ block.settings.footer_margin_top | default: 8 }}px;">{{ block.settings.footer_text }}</div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <!-- Right Column: Cart Summary (Desktop) -->
            <div class="quiz-recommendations-cart-column">
                <!-- Cart Summary -->
                <div class="cart-summary">
                    <div class="cart-summary-header" data-cart-header>
                        <div class="cart-header-content">
                            <div class="cart-header-left">
                                <h3 class="cart-summary-title">Order Summary</h3>
                                <span class="cart-item-count" data-item-count>(0)</span>
                            </div>
                            <button class="cart-toggle-btn" data-cart-toggle aria-label="Toggle cart">
                                <svg class="cart-arrow" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                        <div class="cart-header-total">
                            <span class="total-price-header" data-total-price-header>$0.00</span>
                        </div>
                    </div>
                    <button class="quiz-btn quiz-btn-checkout checkout-mobile" data-checkout-btn>
                        Checkout
                    </button>
                    {% if section.settings.checkout_subtext != blank %}
                        <div class="checkout-subtext checkout-mobile">{{ section.settings.checkout_subtext }}</div>
                    {% endif %}
                    <button class="cart-close-btn" data-cart-close aria-label="Close cart">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <div class="cart-summary-body" data-cart-body>
                        <div class="cart-items" data-cart-items>
                            <!-- Cart items will be added here dynamically -->
                        </div>
                        <span class="total-price" data-total-price style="display: none;">$0.00</span>
                        <button class="quiz-btn quiz-btn-checkout" data-checkout-btn>
                            Checkout
                        </button>
                        {% if section.settings.checkout_subtext != blank %}
                            <div class="checkout-subtext">{{ section.settings.checkout_subtext }}</div>
                        {% endif %}
                        {% if section.settings.highlight_text_desktop != blank %}
                            <div class="cart-highlight-box-external desktop-only cart-highlight-fullscreen" data-highlight-text>
                                {{ section.settings.highlight_text_desktop }}
                            </div>
                        {% endif %}
                    </div>
                </div>

                {% if section.settings.highlight_text_desktop != blank %}
                    <div class="cart-highlight-box-external desktop-only cart-highlight-static" data-highlight-text>
                        {{ section.settings.highlight_text_desktop }}
                    </div>
                {% endif %}
                {% if section.settings.highlight_text_mobile != blank %}
                    <div class="cart-highlight-box-external mobile-only" data-highlight-text>
                        {{ section.settings.highlight_text_mobile }}
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Mobile Sticky Cart Bar -->
        <div class="quiz-recommendations-mobile-sticky-bar">
            <div class="mobile-sticky-bar-content">
                <div class="mobile-sticky-bar-price-section">
                    <div class="mobile-sticky-bar-price-label">
                        <span>Total Price (with savings)</span>
                        <button class="mobile-sticky-bar-dropdown-toggle" data-mobile-price-toggle aria-label="Toggle price details">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                    <div class="mobile-sticky-bar-price-values">
                        <span class="mobile-sticky-bar-original-price" data-mobile-original-price>$144.60</span>
                        <span class="mobile-sticky-bar-total" data-mobile-total-price>$75.00</span>
                    </div>
                </div>
                <button class="mobile-sticky-bar-checkout" data-mobile-checkout-btn>
                    Checkout
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M3.33331 10H16.6666M16.6666 10L11.6666 5M16.6666 10L11.6666 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3.33331 3.33331L3.33331 16.6666" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                {% if section.settings.checkout_subtext != blank %}
                    <div class="mobile-sticky-bar-subtext">{{ section.settings.checkout_subtext }}</div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
    /* Base Styles */
    #shopify-section-{{ section.id }} {
        padding: 0;
        display: block !important;
    }

    #shopify-section-{{ section.id }} .quiz-recommendations {
        min-height: fit-content;
        height: auto;
        display: block;
        background: #F7F7FC;
    }

    /* Wrapper */
    #shopify-section-{{ section.id }} .quiz-recommendations-wrapper {
        display: flex;
        flex-direction: column;
        min-height: calc(100vh - 136px);
        background: #F7F7FC;
        width: 100%;
    }

    /* Header Section */
    #shopify-section-{{ section.id }} .quiz-recommendations-header {
        width: 100%;
        padding: 40px 60px 0;
        background: #F7F7FC;
    }

    /* Sale Banner */
    #shopify-section-{{ section.id }} .recommendations-sale-banner {
        font-family: 'Vanilla Ravioli', serif;
        font-size: 48px;
        font-weight: 400;
        line-height: 1.2;
        color: #2F3936;
        margin: 0 0 24px 0;
        text-align: center;
    }

    /* Intro Text */
    #shopify-section-{{ section.id }} .recommendations-intro-text {
        font-family: 'Gotham', sans-serif;
        font-size: 16px;
        font-weight: 400;
        line-height: 1.6;
        color: #2F3936;
        margin-bottom: 32px;
        text-align: center;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
    }

    #shopify-section-{{ section.id }} .recommendations-intro-text p {
        margin: 0 0 16px 0;
    }

    #shopify-section-{{ section.id }} .recommendations-intro-text p:last-child {
        margin-bottom: 0;
    }

    /* CTA Button */
    #shopify-section-{{ section.id }} .recommendations-cta-button {
        display: block;
        margin: 0 auto 60px;
        padding: 16px 32px;
        background: #E98C36;
        color: white;
        border: none;
        border-radius: 999px;
        font-family: 'Gotham', sans-serif;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: opacity 0.2s;
    }

    #shopify-section-{{ section.id }} .recommendations-cta-button:hover {
        opacity: 0.9;
    }

    /* Content Layout */
    #shopify-section-{{ section.id }} .quiz-recommendations-content-layout {
        display: flex;
        align-items: flex-start;
        gap: 40px;
        padding: 0 60px 80px;
        background: #F7F7FC;
    }

    /* Left Column - Content */
    #shopify-section-{{ section.id }} .quiz-recommendations-content-column {
        flex: 1;
        display: flex;
        flex-direction: column;
        max-width: 800px;
    }

    /* Right Column - Cart Summary (Desktop) */
    #shopify-section-{{ section.id }} .quiz-recommendations-cart-column {
        width: 380px;
        flex-shrink: 0;
        display: flex;
        flex-direction: column;
        gap: 24px;
    }

    /* Mobile Sticky Bar */
    #shopify-section-{{ section.id }} .quiz-recommendations-mobile-sticky-bar {
        display: none;
    }

    /* Title and Subtitle */
    #shopify-section-{{ section.id }} .recommendations-title {
        font-family: 'Gotham', sans-serif;
        font-size: 24px;
        font-weight: 600;
        color: #2F3936;
        margin: 0 0 6px 0;
        text-align: left;
    }

    #shopify-section-{{ section.id }} .recommendations-subtitle {
        font-family: 'Gotham', sans-serif;
        font-size: 14px;
        color: #2F3936;
        line-height: 1.5;
        margin-bottom: 20px;
    }

    #shopify-section-{{ section.id }} .recommendations-subtitle p:last-of-type {
        margin-bottom: 0;
    }

    /* Product Cards Container */
    #shopify-section-{{ section.id }} .recommended-products-list {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin-bottom: 40px;
    }

    /* Cart Summary */
    #shopify-section-{{ section.id }} .cart-summary {
        background: #fff;
        border-radius: 12px;
        position: sticky;
        top: 20px;
        border: 1px solid #e5e7eb;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .cart-summary-header {
        margin-bottom: 10px;
        padding-bottom: 12px;
        border-bottom: 1px solid #e5e7eb;
    }

    .cart-header-content {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .cart-header-left {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    #shopify-section-{{ section.id }} .cart-summary-title {
        font-family: 'Gotham', sans-serif;
        font-size: 18px;
        font-weight: 600;
        color: #2F3936;
        margin: 0;
    }

    #shopify-section-{{ section.id }} .cart-item-count {
        font-family: 'Gotham', sans-serif;
        font-size: 14px;
        color: #98A2B3;
        font-weight: 400;
    }

    .cart-header-total {
        display: none;
        font-size: 18px;
        font-weight: 600;
        color: #2F3936;
    }

    .cart-toggle-btn {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 4px;
        color: #98A2B3;
    }

    .cart-close-btn {
        display: none;
        position: absolute;
        top: 8px;
        right: 12px;
        background: #f3f4f6;
        border: none;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 10000;
        color: #2F3936;
        transition: background 0.2s;
    }

    .cart-close-btn:hover {
        background: #e5e7eb;
    }

    .cart-arrow {
        transition: transform 0.3s ease;
    }

    .cart-summary.collapsed .cart-arrow {
        transform: rotate(180deg);
    }

    .cart-items {
        display: flex;
        flex-direction: column;
        gap: 0;
        margin-bottom: 10px;
    }

    .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: start;
        position: relative;
        padding: 6px 0;
        border: none;
        border-bottom: none;
    }

    .cart-item-info {
        flex: 1;
    }

    .cart-item-name {
        font-size: 14px;
        font-weight: 600;
        color: #2F3936;
        display: block;
        margin-bottom: 0;
    }

    .cart-item-meta {
        font-size: 11px;
        color: #2F3936;
    }

    .cart-item-price {
        font-size: 14px;
        font-weight: 600;
        color: #2F3936;
        text-align: right;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .cart-item-price-original {
        font-size: 13px;
        color: #98A2B3;
        text-decoration: line-through;
        font-weight: 400;
    }

    .cart-item-price-discounted {
        color: #000;
        font-weight: 600;
        background: #d4ff6a;
        padding: 2px 6px;
        border-radius: 4px;
    }

    .cart-item-remove {
        background: none;
        border: none;
        color: #98A2B3;
        font-size: 20px;
        line-height: 1;
        cursor: pointer;
        padding: 0;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        transition: color 0.2s ease;
    }

    .cart-item-remove:hover {
        color: #ef4444;
    }

    .cart-summary-divider {
        border-top: 1px solid #e5e7eb;
        margin: 12px 0;
    }

    .cart-summary-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 4px 0;
        font-size: 14px;
        color: #98A2B3;
    }

    .cart-summary-row.total {
        font-size: 16px;
        font-weight: 600;
        color: #2F3936;
        padding-top: 8px;
    }

    .cart-total {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 12px;
        margin-bottom: 16px;
        border-top: 1px solid #e5e7eb;
        font-size: 16px;
        font-weight: 600;
        color: #2F3936;
    }

    .cart-highlight-box-external {
        background: #d4ff6a;
        padding: 12px 16px;
        border-radius: 6px;
        margin-top: 12px;
        font-size: 13px;
        line-height: 1.4;
        color: #000;
        text-align: center;
        font-weight: 500;
    }

    .cart-highlight-box-external p {
        margin-bottom: 0;
    }

    .cart-highlight-box-external.cart-highlight-fullscreen {
        display: none;
    }

    .cart-highlight-box-external.mobile-only {
        margin: 12px 20px;
        width: calc(100% - 40px);
    }

    .desktop-only {
        display: block;
    }

    .mobile-only {
        display: none;
    }

    .quiz-btn-checkout {
        width: 100%;
        background: #1A365D;
        color: white;
        border: none;
        padding: 14px 24px;
        border-radius: 5rem;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: opacity 0.2s;
        position: relative;
    }

    .quiz-btn-checkout:hover {
        opacity: 0.9;
    }

    .quiz-btn-checkout.loading {
        pointer-events: none;
        opacity: 0.7;
    }

    .quiz-btn-checkout.loading::after {
        content: '';
        position: absolute;
        width: 16px;
        height: 16px;
        top: 50%;
        left: 50%;
        margin-left: -8px;
        margin-top: -8px;
        border: 2px solid #ffffff;
        border-radius: 50%;
        border-top-color: transparent;
        animation: spinner 0.6s linear infinite;
    }

    @keyframes spinner {
        to {
            transform: rotate(360deg);
        }
    }

    .checkout-mobile {
        display: none;
    }

    .checkout-subtext {
        font-size: 12px;
        text-align: center;
        margin-top: 12px;
        color: #2F3936;
    }

    /* Upsell Package Block Styles */
    .maison_commerce_maison_upsell_package {
        margin-top: 40px;
    }

    .maison_commerce_maison_upsell_package__container {
        margin: 0 auto;
    }

    .maison_commerce_maison_upsell_package__block {
        border-radius: 12px;
        overflow: hidden;
        max-width: 100%;
    }

    .maison_commerce_maison_upsell_package__header {
        color: white;
        padding: 12px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 16px;
    }

    .maison_commerce_maison_upsell_package__header-left {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-shrink: 0;
    }

    .maison_commerce_maison_upsell_package__flame-icon {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
    }

    .maison_commerce_maison_upsell_package__header-text {
        font-family: 'Gotham', sans-serif;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        white-space: nowrap;
    }

    .maison_commerce_maison_upsell_package__timer {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 6px;
        padding: 6px 12px;
        font-family: 'Gotham', sans-serif;
        font-weight: 600;
        letter-spacing: 1px;
        white-space: nowrap;
        flex-shrink: 0;
    }

    .maison_commerce_maison_upsell_package__content {
        display: flex;
        flex-direction: column;
    }

    .maison_commerce_maison_upsell_package__image {
        width: 100%;
    }

    .maison_commerce_maison_upsell_package__image img {
        width: 100%;
        height: auto;
        object-fit: contain;
        display: block;
    }

    .maison_commerce_maison_upsell_package__discount-badge {
        color: white;
        border-radius: 20px;
        font-family: 'Gotham', sans-serif;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        display: inline-block;
        align-self: center;
    }

    .maison_commerce_maison_upsell_package__text-content {
        display: flex;
        flex-direction: column;
    }

    .maison_commerce_maison_upsell_package__title {
        font-family: 'Vanilla Ravioli', serif;
        font-weight: 400;
        margin: 0;
        line-height: 1.2;
    }

    .maison_commerce_maison_upsell_package__description {
        font-family: 'Gotham', sans-serif;
        line-height: 1.6;
    }

    .maison_commerce_maison_upsell_package__description p {
        margin: 0 0 8px 0;
    }

    .maison_commerce_maison_upsell_package__description p:last-child {
        margin-bottom: 0;
    }

    .maison_commerce_maison_upsell_package__description strong {
        font-weight: 700;
    }

    .maison_commerce_maison_upsell_package__button {
        border: none;
        font-family: 'Gotham', sans-serif;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        transition: all 0.2s;
    }

    .maison_commerce_maison_upsell_package__button:hover {
        opacity: 0.9;
        transform: translateY(-1px);
    }

    .maison_commerce_maison_upsell_package__button svg {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
    }

    .maison_commerce_maison_upsell_package__footer {
        font-family: 'Gotham', sans-serif;
        color: #98A2B3;
        text-align: center;
    }

    /* Mobile Styles */
    @media (max-width: 1024px) {
        #shopify-section-{{ section.id }} .quiz-recommendations-wrapper {
            flex-direction: column;
            min-height: auto;
        }

        #shopify-section-{{ section.id }} .quiz-recommendations-header {
            padding: 20px 16px 0;
        }

        #shopify-section-{{ section.id }} .recommendations-sale-banner {
            font-size: 32px;
            margin-bottom: 20px;
        }

        #shopify-section-{{ section.id }} .recommendations-intro-text {
            font-size: 14px;
            margin-bottom: 24px;
            padding: 0;
        }

        #shopify-section-{{ section.id }} .recommendations-cta-button {
            margin-bottom: 40px;
            padding: 14px 28px;
            font-size: 14px;
        }

        #shopify-section-{{ section.id }} .quiz-recommendations-content-layout {
            flex-direction: column;
            padding: 0 16px 100px;
            gap: 24px;
        }

        #shopify-section-{{ section.id }} .quiz-recommendations-content-column {
            max-width: 100%;
        }

        #shopify-section-{{ section.id }} .quiz-recommendations-cart-column {
            display: none; /* Hide desktop cart on mobile */
        }

        /* Mobile Sticky Bar */
        #shopify-section-{{ section.id }} .quiz-recommendations-mobile-sticky-bar {
            display: block;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
            z-index: 9999;
            padding: 12px 20px;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-content {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-width: 100%;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-price-section {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            width: 100%;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-price-label {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-price-label > span {
            font-family: 'Gotham', sans-serif;
            font-size: 14px;
            font-weight: 400;
            color: #2F3936;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-dropdown-toggle {
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            color: #2F3936;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-dropdown-toggle.expanded svg {
            transform: rotate(180deg);
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-price-values {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-original-price {
            font-family: 'Gotham', sans-serif;
            font-size: 13px;
            color: #98A2B3;
            text-decoration: line-through;
            font-weight: 400;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-total {
            font-family: 'Gotham', sans-serif;
            font-size: 18px;
            font-weight: 600;
            color: #1A365D;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-checkout {
            width: 100%;
            padding: 14px 24px;
            background: #1A365D;
            color: white;
            border: none;
            border-radius: 8px;
            font-family: 'Gotham', sans-serif;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: opacity 0.2s;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-checkout:hover {
            opacity: 0.9;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-checkout svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        #shopify-section-{{ section.id }} .mobile-sticky-bar-subtext {
            font-family: 'Gotham', sans-serif;
            font-size: 12px;
            color: #2F3936;
            text-align: center;
            font-weight: 700;
        }

        /* Mobile Cart Summary (Full Screen Overlay) */
        #shopify-section-{{ section.id }} .quiz-recommendations-cart-column.mobile-expanded {
            display: flex !important;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            z-index: 10000;
            background: white;
            padding: 20px;
            overflow-y: auto;
            flex-direction: column;
        }

        #shopify-section-{{ section.id }} .quiz-recommendations-cart-column.mobile-expanded .cart-summary {
            position: static;
            border: none;
            padding: 0;
            border-radius: 0;
            box-shadow: none;
        }

        #shopify-section-{{ section.id }} .quiz-recommendations-cart-column.mobile-expanded .cart-summary-body {
            flex: 1;
            overflow-y: auto;
            padding-top: 16px;
        }

        /* Mobile Cart Header */
        #shopify-section-{{ section.id }} .quiz-recommendations-cart-column.mobile-expanded .cart-summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 16px;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 16px;
        }

        #shopify-section-{{ section.id }} .quiz-recommendations-cart-column.mobile-expanded .cart-close-btn {
            display: flex;
            position: absolute;
            top: 20px;
            right: 20px;
            background: #f3f4f6;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10001;
            color: #2F3936;
        }

        .desktop-only {
            display: none;
        }

        .mobile-only {
            display: block;
        }

        .cart-highlight-box-external.mobile-only {
            background: white;
            width: 100%;
            margin: 0;
            padding: 12px;
        }

        .cart-highlight-box-external.mobile-only > * {
            background: #d4ff6a;
            padding: 12px 16px;
            border-radius: 6px;
            display: inline-block;
        }

        /* Upsell Package Mobile Styles */
        .maison_commerce_maison_upsell_package {
            margin-top: 24px;
            padding-top: var(--padding-top-mobile, 0) !important;
            padding-bottom: var(--padding-bottom-mobile, 0) !important;
            padding-left: var(--padding-left-mobile, 0) !important;
            padding-right: var(--padding-right-mobile, 0) !important;
        }

        .maison_commerce_maison_upsell_package__header {
            padding: 10px 16px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .maison_commerce_maison_upsell_package__header-text {
            font-size: var(--header-font-size-mobile, 11px);
        }

        .maison_commerce_maison_upsell_package__timer {
            padding: 4px 8px;
            font-size: var(--timer-font-size-mobile, 11px);
        }

        .maison_commerce_maison_upsell_package__content {
            padding: var(--content-padding-mobile, 16px) !important;
        }

        .maison_commerce_maison_upsell_package__title {
            font-size: var(--title-font-size-mobile, 22px);
        }

        .maison_commerce_maison_upsell_package__description {
            font-size: var(--description-font-size-mobile, 13px);
        }

        .maison_commerce_maison_upsell_package__button {
            padding: var(--button-padding-vertical-mobile, 14px) var(--button-padding-horizontal-mobile, 20px);
            font-size: var(--button-font-size-mobile, 14px);
        }

        .maison_commerce_maison_upsell_package__footer {
            font-size: var(--footer-font-size-mobile, 11px);
        }

        .maison_commerce_maison_upsell_package__discount-badge {
            font-size: var(--badge-font-size-mobile, 11px);
            padding: var(--badge-padding-vertical-mobile, 6px) var(--badge-padding-horizontal-mobile, 16px);
        }
    }
</style>

{% schema %}
{
    "name": "Quiz Recommendations",
    "class": "quiz-section",
    "settings": [
        {
            "type": "header",
            "content": "Header Section"
        },
        {
            "type": "text",
            "id": "sale_banner_text",
            "label": "Sale Banner Text",
            "default": "WINTER SALE 25% OFF SITEWIDE!"
        },
        {
            "type": "richtext",
            "id": "intro_text",
            "label": "Introductory Text",
            "default": "<p>Your hair story is about to change. These products were chosen to help you grow, heal, and fall in love with your hair again. They're already waiting in your basket. All that's left is to begin.</p>"
        },
        {
            "type": "text",
            "id": "cta_button_text",
            "label": "CTA Button Text",
            "default": "Your Top 3 Products +25% OFF"
        },
        {
            "type": "header",
            "content": "Content"
        },
        {
            "type": "text",
            "id": "title",
            "label": "Title"
        },
        {
            "type": "richtext",
            "id": "subtitle",
            "label": "Subtitle"
        },
        {
            "type": "header",
            "content": "Colors"
        },
        {
            "type": "color",
            "id": "background_color",
            "label": "Background Color",
            "default": "#F7F7FC"
        },
        {
            "type": "header",
            "content": "Cart Summary"
        },
        {
            "type": "text",
            "id": "checkout_subtext",
            "label": "Checkout Subtext",
            "default": "if you don't like your first order it will be on us"
        },
        {
            "type": "richtext",
            "id": "highlight_text_desktop",
            "label": "Highlight Text (Desktop)",
            "default": "<p><strong>60% off</strong> + free shipping applied!</p>"
        },
        {
            "type": "richtext",
            "id": "highlight_text_mobile",
            "label": "Highlight Text (Mobile)",
            "default": "<p><strong>60% off</strong> + free shipping applied!</p>"
        }
    ],
    "blocks": [
        {
            "type": "upsell_package",
            "name": "Upsell Package",
            "settings": [
                {
                    "type": "header",
                    "content": "Layout"
                },
                {
                    "type": "range",
                    "id": "max_width",
                    "min": 600,
                    "max": 1400,
                    "step": 20,
                    "unit": "px",
                    "label": "Max Width",
                    "default": 1200
                },
                {
                    "type": "range",
                    "id": "padding_top_desktop",
                    "min": 0,
                    "max": 100,
                    "step": 5,
                    "unit": "px",
                    "label": "Padding Top (Desktop)",
                    "default": 0
                },
                {
                    "type": "range",
                    "id": "padding_bottom_desktop",
                    "min": 0,
                    "max": 100,
                    "step": 5,
                    "unit": "px",
                    "label": "Padding Bottom (Desktop)",
                    "default": 0
                },
                {
                    "type": "range",
                    "id": "padding_left_desktop",
                    "min": 0,
                    "max": 100,
                    "step": 5,
                    "unit": "px",
                    "label": "Padding Left (Desktop)",
                    "default": 0
                },
                {
                    "type": "range",
                    "id": "padding_right_desktop",
                    "min": 0,
                    "max": 100,
                    "step": 5,
                    "unit": "px",
                    "label": "Padding Right (Desktop)",
                    "default": 0
                },
                {
                    "type": "range",
                    "id": "padding_top_mobile",
                    "min": 0,
                    "max": 100,
                    "step": 5,
                    "unit": "px",
                    "label": "Padding Top (Mobile)",
                    "default": 0
                },
                {
                    "type": "range",
                    "id": "padding_bottom_mobile",
                    "min": 0,
                    "max": 100,
                    "step": 5,
                    "unit": "px",
                    "label": "Padding Bottom (Mobile)",
                    "default": 0
                },
                {
                    "type": "range",
                    "id": "padding_left_mobile",
                    "min": 0,
                    "max": 100,
                    "step": 5,
                    "unit": "px",
                    "label": "Padding Left (Mobile)",
                    "default": 0
                },
                {
                    "type": "range",
                    "id": "padding_right_mobile",
                    "min": 0,
                    "max": 100,
                    "step": 5,
                    "unit": "px",
                    "label": "Padding Right (Mobile)",
                    "default": 0
                },
                {
                    "type": "header",
                    "content": "Colors"
                },
                {
                    "type": "color",
                    "id": "primary_color",
                    "label": "Primary Color (Header)",
                    "default": "#1a365d"
                },
                {
                    "type": "color",
                    "id": "background_color",
                    "label": "Background Color",
                    "default": "#fffbc0"
                },
                {
                    "type": "color",
                    "id": "text_color",
                    "label": "Text Color",
                    "default": "#102B26"
                },
                {
                    "type": "color",
                    "id": "button_bg_color",
                    "label": "Button Background Color",
                    "default": "#ffffff"
                },
                {
                    "type": "color",
                    "id": "button_text_color",
                    "label": "Button Text Color",
                    "default": "#1a365d"
                },
                {
                    "type": "color",
                    "id": "discount_badge_color",
                    "label": "Discount Badge Color",
                    "default": "#E98C36"
                },
                {
                    "type": "header",
                    "content": "Content"
                },
                {
                    "type": "image_picker",
                    "id": "product_image",
                    "label": "Product Image"
                },
                {
                    "type": "text",
                    "id": "header_text",
                    "label": "Header Text",
                    "default": "LIMITED-TIME CRAZY DEAL"
                },
                {
                    "type": "text",
                    "id": "title",
                    "label": "Title",
                    "default": "Ultimate Hair Care Package"
                },
                {
                    "type": "richtext",
                    "id": "description",
                    "label": "Description",
                    "default": "<p>Get all 7 products — more than our top 3 bestsellers — with <strong>50% off</strong>. This is a one-time purchase with no subscription. A limited-time offer we may not keep for long.</p>"
                },
                {
                    "type": "range",
                    "id": "discount_percent",
                    "min": 0,
                    "max": 100,
                    "step": 5,
                    "unit": "%",
                    "label": "Discount Percent",
                    "default": 50
                },
                {
                    "type": "product",
                    "id": "product",
                    "label": "Product"
                },
                {
                    "type": "text",
                    "id": "button_text",
                    "label": "Button Text",
                    "default": "Claim Ultimate Package"
                },
                {
                    "type": "text",
                    "id": "footer_text",
                    "label": "Footer Text",
                    "default": "No subscription • One-time payment • Limited availability"
                },
                {
                    "type": "header",
                    "content": "Countdown Timer"
                },
                {
                    "type": "number",
                    "id": "countdown_hours",
                    "label": "Countdown Hours",
                    "default": 0
                },
                {
                    "type": "number",
                    "id": "countdown_minutes",
                    "label": "Countdown Minutes",
                    "default": 9
                },
                {
                    "type": "number",
                    "id": "countdown_seconds",
                    "label": "Countdown Seconds",
                    "default": 57
                },
                {
                    "type": "header",
                    "content": "Typography - Desktop"
                },
                {
                    "type": "range",
                    "id": "header_font_size_desktop",
                    "min": 10,
                    "max": 20,
                    "step": 1,
                    "unit": "px",
                    "label": "Header Font Size (Desktop)",
                    "default": 12
                },
                {
                    "type": "range",
                    "id": "timer_font_size_desktop",
                    "min": 10,
                    "max": 20,
                    "step": 1,
                    "unit": "px",
                    "label": "Timer Font Size (Desktop)",
                    "default": 12
                },
                {
                    "type": "range",
                    "id": "title_font_size_desktop",
                    "min": 18,
                    "max": 48,
                    "step": 2,
                    "unit": "px",
                    "label": "Title Font Size (Desktop)",
                    "default": 28
                },
                {
                    "type": "range",
                    "id": "description_font_size_desktop",
                    "min": 12,
                    "max": 24,
                    "step": 1,
                    "unit": "px",
                    "label": "Description Font Size (Desktop)",
                    "default": 14
                },
                {
                    "type": "range",
                    "id": "button_font_size_desktop",
                    "min": 12,
                    "max": 24,
                    "step": 1,
                    "unit": "px",
                    "label": "Button Font Size (Desktop)",
                    "default": 16
                },
                {
                    "type": "range",
                    "id": "footer_font_size_desktop",
                    "min": 10,
                    "max": 16,
                    "step": 1,
                    "unit": "px",
                    "label": "Footer Font Size (Desktop)",
                    "default": 12
                },
                {
                    "type": "range",
                    "id": "badge_font_size_desktop",
                    "min": 10,
                    "max": 16,
                    "step": 1,
                    "unit": "px",
                    "label": "Badge Font Size (Desktop)",
                    "default": 12
                },
                {
                    "type": "header",
                    "content": "Typography - Mobile"
                },
                {
                    "type": "range",
                    "id": "header_font_size_mobile",
                    "min": 10,
                    "max": 16,
                    "step": 1,
                    "unit": "px",
                    "label": "Header Font Size (Mobile)",
                    "default": 11
                },
                {
                    "type": "range",
                    "id": "timer_font_size_mobile",
                    "min": 10,
                    "max": 16,
                    "step": 1,
                    "unit": "px",
                    "label": "Timer Font Size (Mobile)",
                    "default": 11
                },
                {
                    "type": "range",
                    "id": "title_font_size_mobile",
                    "min": 18,
                    "max": 32,
                    "step": 2,
                    "unit": "px",
                    "label": "Title Font Size (Mobile)",
                    "default": 22
                },
                {
                    "type": "range",
                    "id": "description_font_size_mobile",
                    "min": 12,
                    "max": 18,
                    "step": 1,
                    "unit": "px",
                    "label": "Description Font Size (Mobile)",
                    "default": 13
                },
                {
                    "type": "range",
                    "id": "button_font_size_mobile",
                    "min": 12,
                    "max": 18,
                    "step": 1,
                    "unit": "px",
                    "label": "Button Font Size (Mobile)",
                    "default": 14
                },
                {
                    "type": "range",
                    "id": "footer_font_size_mobile",
                    "min": 10,
                    "max": 14,
                    "step": 1,
                    "unit": "px",
                    "label": "Footer Font Size (Mobile)",
                    "default": 11
                },
                {
                    "type": "range",
                    "id": "badge_font_size_mobile",
                    "min": 10,
                    "max": 14,
                    "step": 1,
                    "unit": "px",
                    "label": "Badge Font Size (Mobile)",
                    "default": 11
                },
                {
                    "type": "header",
                    "content": "Spacing"
                },
                {
                    "type": "range",
                    "id": "content_padding_desktop",
                    "min": 16,
                    "max": 48,
                    "step": 4,
                    "unit": "px",
                    "label": "Content Padding (Desktop)",
                    "default": 24
                },
                {
                    "type": "range",
                    "id": "content_padding_mobile",
                    "min": 12,
                    "max": 32,
                    "step": 4,
                    "unit": "px",
                    "label": "Content Padding (Mobile)",
                    "default": 16
                },
                {
                    "type": "range",
                    "id": "content_gap",
                    "min": 8,
                    "max": 32,
                    "step": 4,
                    "unit": "px",
                    "label": "Content Gap",
                    "default": 16
                },
                {
                    "type": "range",
                    "id": "text_gap",
                    "min": 8,
                    "max": 24,
                    "step": 2,
                    "unit": "px",
                    "label": "Text Gap",
                    "default": 12
                },
                {
                    "type": "range",
                    "id": "image_margin_bottom",
                    "min": 0,
                    "max": 32,
                    "step": 4,
                    "unit": "px",
                    "label": "Image Margin Bottom",
                    "default": 16
                },
                {
                    "type": "range",
                    "id": "badge_margin_bottom",
                    "min": 0,
                    "max": 32,
                    "step": 4,
                    "unit": "px",
                    "label": "Badge Margin Bottom",
                    "default": 20
                },
                {
                    "type": "range",
                    "id": "button_margin_top",
                    "min": 0,
                    "max": 32,
                    "step": 4,
                    "unit": "px",
                    "label": "Button Margin Top",
                    "default": 8
                },
                {
                    "type": "range",
                    "id": "footer_margin_top",
                    "min": 0,
                    "max": 32,
                    "step": 4,
                    "unit": "px",
                    "label": "Footer Margin Top",
                    "default": 8
                },
                {
                    "type": "header",
                    "content": "Button Styling"
                },
                {
                    "type": "range",
                    "id": "button_padding_vertical",
                    "min": 8,
                    "max": 32,
                    "step": 2,
                    "unit": "px",
                    "label": "Button Padding Vertical",
                    "default": 16
                },
                {
                    "type": "range",
                    "id": "button_padding_horizontal",
                    "min": 16,
                    "max": 48,
                    "step": 2,
                    "unit": "px",
                    "label": "Button Padding Horizontal",
                    "default": 24
                },
                {
                    "type": "range",
                    "id": "button_padding_vertical_mobile",
                    "min": 8,
                    "max": 24,
                    "step": 2,
                    "unit": "px",
                    "label": "Button Padding Vertical (Mobile)",
                    "default": 14
                },
                {
                    "type": "range",
                    "id": "button_padding_horizontal_mobile",
                    "min": 12,
                    "max": 32,
                    "step": 2,
                    "unit": "px",
                    "label": "Button Padding Horizontal (Mobile)",
                    "default": 20
                },
                {
                    "type": "range",
                    "id": "button_border_radius",
                    "min": 0,
                    "max": 20,
                    "step": 2,
                    "unit": "px",
                    "label": "Button Border Radius",
                    "default": 8
                },
                {
                    "type": "header",
                    "content": "Badge Styling"
                },
                {
                    "type": "range",
                    "id": "badge_padding_vertical",
                    "min": 4,
                    "max": 16,
                    "step": 2,
                    "unit": "px",
                    "label": "Badge Padding Vertical",
                    "default": 8
                },
                {
                    "type": "range",
                    "id": "badge_padding_horizontal",
                    "min": 12,
                    "max": 32,
                    "step": 2,
                    "unit": "px",
                    "label": "Badge Padding Horizontal",
                    "default": 20
                },
                {
                    "type": "range",
                    "id": "badge_padding_vertical_mobile",
                    "min": 4,
                    "max": 12,
                    "step": 2,
                    "unit": "px",
                    "label": "Badge Padding Vertical (Mobile)",
                    "default": 6
                },
                {
                    "type": "range",
                    "id": "badge_padding_horizontal_mobile",
                    "min": 12,
                    "max": 24,
                    "step": 2,
                    "unit": "px",
                    "label": "Badge Padding Horizontal (Mobile)",
                    "default": 16
                }
            ]
        }
    ],
    "presets": [
        {
            "name": "Quiz Recommendations"
        }
    ]
}
{% endschema %}

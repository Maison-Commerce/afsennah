<section class="maison_commerce_maison_instagram_scroll">
  <div class="maison_commerce_maison_instagram_scroll__container">
    {% if section.settings.heading != blank %}
      <h2 class="maison_commerce_maison_instagram_scroll__heading">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    {% if section.blocks.size > 0 %}
      <div class="maison_commerce_maison_instagram_scroll__wrapper">
        <div class="maison_commerce_maison_instagram_scroll__track">
          {% comment %} First set of images {% endcomment %}
          {% for block in section.blocks %}
            {% if block.type == 'image' %}
              <div class="maison_commerce_maison_instagram_scroll__item" {{ block.shopify_attributes }}>
                {% if block.settings.image != blank %}
                  <div class="maison_commerce_maison_instagram_scroll__link">
                    <div class="maison_commerce_maison_instagram_scroll__image-wrapper">
                      <img 
                        src="{{ block.settings.image | image_url: width: 500 }}" 
                        alt="{{ block.settings.image.alt | default: block.settings.image_alt | escape }}"
                        class="maison_commerce_maison_instagram_scroll__image"
                        width="{{ block.settings.image.width }}"
                        height="{{ block.settings.image.height }}"
                        loading="lazy"
                      />
                    </div>
                </div>
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}
          
          {% comment %} Duplicate set for seamless loop {% endcomment %}
          {% for block in section.blocks %}
            {% if block.type == 'image' %}
              <div class="maison_commerce_maison_instagram_scroll__item">
                {% if block.settings.image != blank %}
                  <a href="{{ block.settings.image_url | default: '#' }}" class="maison_commerce_maison_instagram_scroll__link">
                    <div class="maison_commerce_maison_instagram_scroll__image-wrapper">
                      <img 
                        src="{{ block.settings.image | image_url: width: 500 }}" 
                        alt="{{ block.settings.image.alt | default: block.settings.image_alt | escape }}"
                        class="maison_commerce_maison_instagram_scroll__image"
                        width="{{ block.settings.image.width }}"
                        height="{{ block.settings.image.height }}"
                        loading="lazy"
                      />
                    </div>
                  </a>
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}
  </div>
</section>

<style>
  #shopify-section-{{ section.id }} {
    padding: 0;
  }

  /* Section Container */
  .maison_commerce_maison_instagram_scroll {
    background-color: {{ section.settings.bg_color }};
    padding-top: {{ section.settings.padding_top_desktop }}px;
    padding-bottom: {{ section.settings.padding_bottom_desktop }}px;
    padding-left: {{ section.settings.padding_left_desktop }}px;
    padding-right: {{ section.settings.padding_right_desktop }}px;
    overflow: hidden;
  }

  @media (max-width: 768px) {
    .maison_commerce_maison_instagram_scroll {
      padding-top: {{ section.settings.padding_top_mobile }}px;
      padding-bottom: {{ section.settings.padding_bottom_mobile }}px;
      padding-left: {{ section.settings.padding_left_mobile }}px;
      padding-right: {{ section.settings.padding_right_mobile }}px;
    }
  }

  /* Container */
  .maison_commerce_maison_instagram_scroll__container {
    max-width: 100%;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: {{ section.settings.content_gap_desktop }}px;
  }

  @media (max-width: 768px) {
    .maison_commerce_maison_instagram_scroll__container {
      gap: {{ section.settings.content_gap_mobile }}px;
    }
  }

  /* Heading */
  .maison_commerce_maison_instagram_scroll__heading {
    font-family: 'Vanilla Ravioli', serif;
    font-size: {{ section.settings.heading_font_size_desktop }}px;
    font-weight: 400;
    line-height: {{ section.settings.heading_line_height_desktop }};
    color: {{ section.settings.heading_color }};
    margin: 0;
    text-align: center;
    text-transform: capitalize;
  }

  @media (max-width: 768px) {
    .maison_commerce_maison_instagram_scroll__heading {
      font-size: {{ section.settings.heading_font_size_mobile }}px;
      line-height: {{ section.settings.heading_line_height_mobile }};
    }
  }

  /* Wrapper */
  .maison_commerce_maison_instagram_scroll__wrapper {
    overflow: hidden;
    width: 100%;
    position: relative;
  }

  /* Track */
  .maison_commerce_maison_instagram_scroll__track {
    display: flex;
    gap: {{ section.settings.image_gap_desktop }}px;
    width: fit-content;
    animation: maison_commerce_maison_instagram_scroll_{{ section.id }} {{ section.settings.scroll_duration_desktop }}s linear infinite;
  }

  @media (max-width: 768px) {
    .maison_commerce_maison_instagram_scroll__track {
      gap: {{ section.settings.image_gap_mobile }}px;
      animation-duration: {{ section.settings.scroll_duration_mobile }}s;
    }
  }

  .maison_commerce_maison_instagram_scroll__wrapper:hover .maison_commerce_maison_instagram_scroll__track {
    animation-play-state: {{ section.settings.pause_on_hover }};
  }

  /* Item */
  .maison_commerce_maison_instagram_scroll__item {
    flex-shrink: 0;
    width: {{ section.settings.image_width_desktop }}px;
  }

  @media (max-width: 768px) {
    .maison_commerce_maison_instagram_scroll__item {
      width: {{ section.settings.image_width_mobile }}px;
    }
  }

  /* Link */
  .maison_commerce_maison_instagram_scroll__link {
    display: block;
    width: 100%;
    text-decoration: none;
    transition: opacity 0.3s ease;
  }

  .maison_commerce_maison_instagram_scroll__link:hover {
    opacity: 0.8;
  }

  /* Image Wrapper */
  .maison_commerce_maison_instagram_scroll__image-wrapper {
    position: relative;
    aspect-ratio: {{ section.settings.image_aspect_ratio }};
    border-radius: {{ section.settings.image_border_radius_desktop }}px {{ section.settings.image_border_radius_desktop }}px 0 0;
    overflow: hidden;
    background-color: {{ section.settings.image_bg_color }};
  }

  @media (max-width: 768px) {
    .maison_commerce_maison_instagram_scroll__image-wrapper {
      border-radius: {{ section.settings.image_border_radius_mobile }}px {{ section.settings.image_border_radius_mobile }}px 0 0;
    }
  }

  /* Image */
  .maison_commerce_maison_instagram_scroll__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* Animation */
  @keyframes maison_commerce_maison_instagram_scroll_{{ section.id }} {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
</style>

{% schema %}
{
  "name": "Maison Instagram Scroll",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#FFFEF3"
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Top (Desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Bottom (Desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_left_desktop",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Left (Desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_right_desktop",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Right (Desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top (Mobile)",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom (Mobile)",
      "default": 24
    },
    {
      "type": "range",
      "id": "padding_left_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Left (Mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_right_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Right (Mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "content_gap_desktop",
      "min": 20,
      "max": 80,
      "step": 1,
      "unit": "px",
      "label": "Content Gap (Desktop)",
      "default": 40
    },
    {
      "type": "range",
      "id": "content_gap_mobile",
      "min": 12,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Content Gap (Mobile)",
      "default": 24
    },
    {
      "type": "header",
      "content": "Heading Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Explore Our Instagram"
    },
    {
      "type": "range",
      "id": "heading_font_size_desktop",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Heading Font Size (Desktop)",
      "default": 32
    },
    {
      "type": "range",
      "id": "heading_font_size_mobile",
      "min": 18,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Heading Font Size (Mobile)",
      "default": 24
    },
    {
      "type": "range",
      "id": "heading_line_height_desktop",
      "min": 1.0,
      "max": 2.0,
      "step": 0.1,
      "label": "Heading Line Height (Desktop)",
      "default": 1.3
    },
    {
      "type": "range",
      "id": "heading_line_height_mobile",
      "min": 1.0,
      "max": 2.0,
      "step": 0.1,
      "label": "Heading Line Height (Mobile)",
      "default": 1.4
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#201C19"
    },
    {
      "type": "header",
      "content": "Image Settings"
    },
    {
      "type": "range",
      "id": "image_width_desktop",
      "min": 200,
      "max": 300,
      "step": 1,
      "unit": "px",
      "label": "Image Width (Desktop)",
      "default": 242
    },
    {
      "type": "range",
      "id": "image_width_mobile",
      "min": 150,
      "max": 250,
      "step": 1,
      "unit": "px",
      "label": "Image Width (Mobile)",
      "default": 188
    },
    {
      "type": "text",
      "id": "image_aspect_ratio",
      "label": "Image Aspect Ratio",
      "default": "1 / 1.44",
      "info": "Format: width / height (e.g., 1 / 1, 16 / 9)"
    },
    {
      "type": "range",
      "id": "image_gap_desktop",
      "min": 8,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Image Gap (Desktop)",
      "default": 12
    },
    {
      "type": "range",
      "id": "image_gap_mobile",
      "min": 8,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Image Gap (Mobile)",
      "default": 14
    },
    {
      "type": "range",
      "id": "image_border_radius_desktop",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Image Border Radius (Desktop)",
      "default": 24
    },
    {
      "type": "range",
      "id": "image_border_radius_mobile",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Image Border Radius (Mobile)",
      "default": 24
    },
    {
      "type": "color",
      "id": "image_bg_color",
      "label": "Image Background Color",
      "default": "transparent"
    },
    {
      "type": "header",
      "content": "Scroll Settings"
    },
    {
      "type": "range",
      "id": "scroll_duration_desktop",
      "min": 10,
      "max": 120,
      "step": 5,
      "unit": "s",
      "label": "Scroll Duration (Desktop)",
      "default": 30,
      "info": "Time for one complete scroll cycle"
    },
    {
      "type": "range",
      "id": "scroll_duration_mobile",
      "min": 10,
      "max": 120,
      "step": 5,
      "unit": "s",
      "label": "Scroll Duration (Mobile)",
      "default": 30,
      "info": "Time for one complete scroll cycle"
    },
    {
      "type": "select",
      "id": "pause_on_hover",
      "label": "Pause on Hover",
      "options": [
        {
          "value": "paused",
          "label": "Pause"
        },
        {
          "value": "running",
          "label": "Continue"
        }
      ],
      "default": "paused",
      "info": "Whether to pause scrolling when hovering over the section"
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "image_alt",
          "label": "Image Alt Text"
        },
        {
          "type": "url",
          "id": "image_url",
          "label": "Image Link URL",
          "info": "Optional: Link to Instagram post or product page"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Maison Instagram Scroll",
      "blocks": [
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        },
        {
          "type": "image"
        }
      ]
    }
  ]
}
{% endschema %}

